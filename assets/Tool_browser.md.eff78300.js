import{_ as e,c as a,o,a as E}from"./app.7e0fabb3.js";const h=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"内核、渲染引擎、js引擎","slug":"内核、渲染引擎、js引擎","link":"#内核、渲染引擎、js引擎","children":[]},{"level":2,"title":"关于app内核的讨论","slug":"关于app内核的讨论","link":"#关于app内核的讨论","children":[]},{"level":2,"title":"app自带内核和系统WebView","slug":"app自带内核和系统webview","link":"#app自带内核和系统webview","children":[]},{"level":2,"title":"小程序内核","slug":"小程序内核","link":"#小程序内核","children":[]}],"relativePath":"Tool/browser.md"}'),r={name:"Tool/browser.md"},d=E('<h2 id="内核、渲染引擎、js引擎" tabindex="-1">内核、渲染引擎、js引擎 <a class="header-anchor" href="#内核、渲染引擎、js引擎" aria-hidden="true">#</a></h2><p>内核包括渲染引擎、<code>js</code>引擎和其它组件，虽然我们现在习惯单独称呼<code>js</code>引擎，但在内核架构图里，<code>js</code>引擎始终是包含在内核里的，只不过可以单独拎出来，因为它和内核之间不是集成关系，而是调用关系，所以如果魔改内核的话可以替换成其它<code>js</code>引擎</p><h2 id="关于app内核的讨论" tabindex="-1">关于app内核的讨论 <a class="header-anchor" href="#关于app内核的讨论" aria-hidden="true">#</a></h2><p>app自带内核的好处：当初微信团队是主动找到X5内核的。原因是安全和可控。安全的原因是如果微信使用系统内核，一旦爆出安卓、chromium的漏洞，将非常被动。很难甚至无法修复。而且如果不是X5统一了标准（虽然之前落后了点），你们要所有机型一个个的适配，甚至包括安卓4.4以前的<code>webview</code>。这个工作量远比适配X5高N倍</p><p>知乎有条回答：微信6.1版本以上的android用户，都是使用的QQ浏览器的X5内核。5.4-6.1之间的版本，若用户安装了QQ浏览器就是使用的X5内核，若用户未安装浏览器，使用的是系统内核。系统没有qq浏览器就用系统的浏览器，有 qq 浏览器会用 qq 浏览器的内核（但评论里也有人反馈高版本微信依然使用的是系统内核的情况）</p><p>还有人回答：在高版本的安卓系统上新版本的微信，之前看过好像也是基于WebView的（当时是看的安卓10）。x5现在只用在兼容低版本系统这个场景</p><p>自测手机系统android system webview版本是87，自带浏览器打开<a href="https://ie.icoa.cn/%E7%BD%91%E7%AB%99%E6%A3%80%E6%B5%8B%E6%98%AF89%EF%BC%8C%E5%BE%AE%E4%BF%A1%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%BC%80%E6%98%AF86%EF%BC%8C%E8%AF%B4%E6%98%8E%E8%87%AA%E5%B8%A6%E6%B5%8F%E8%A7%88%E5%99%A8%E5%92%8C%E5%BE%AE%E4%BF%A1%E9%83%BD%E6%98%AF%E7%94%A8%E5%AE%83%E4%BB%ACapp%E8%87%AA%E5%B8%A6%E7%9A%84%E5%86%85%E6%A0%B8" target="_blank" rel="noreferrer">https://ie.icoa.cn/网站检测是89，微信浏览器打开是86，说明自带浏览器和微信都是用它们app自带的内核</a></p><p>还有一种检测办法，打开<a href="http://soft.imtt.qq.com/browser/tes/feedback.html%EF%BC%8C%E6%98%BE%E7%A4%BA000000%E8%A1%A8%E7%A4%BA%E5%8A%A0%E8%BD%BD%E7%9A%84%E6%98%AF%E7%B3%BB%E7%BB%9F%E5%86%85%E6%A0%B8%EF%BC%8C%E6%98%BE%E7%A4%BA%E5%A4%A7%E4%BA%8E0%E7%9A%84%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E5%8A%A0%E8%BD%BD%E4%BA%86x5%E5%86%85%E6%A0%B8%EF%BC%88%E6%95%B0%E5%AD%97%E6%98%AFx5%E5%86%85%E6%A0%B8%E7%89%88%E6%9C%AC%E5%8F%B7%EF%BC%89" target="_blank" rel="noreferrer">http://soft.imtt.qq.com/browser/tes/feedback.html，显示000000表示加载的是系统内核，显示大于0的数字表示加载了x5内核（数字是x5内核版本号）</a></p><h2 id="app自带内核和系统webview" tabindex="-1">app自带内核和系统WebView <a class="header-anchor" href="#app自带内核和系统webview" aria-hidden="true">#</a></h2><p>遇到过一个问题：遇到一个跑在企微端的H5项目在Android 9手机上白屏，app版本已经是最新，排查半天是系统内置<code>WebView</code>版本过低，只有68，升级系统<code>WebView</code>后才解决</p><p>原因：企微自带了x5内核，可能是默认禁用掉了app自带内核才会调用系统内置<code>Webview</code>来进行渲染加载（google play商店版本的微信默认就是使用系统<code>WebView</code>内核，这也是很多人觉得觉得 Play 商店版本的微信体验会比国内版本的微信好的原因之一）</p><p>X5 WebView 内核是在APP 第一次初始化时，动态下载到APP 的内部存储空间，因为TBS SDK(Android x5 webview)采用了后台动态下发内核的方案。由于Google Play 禁止任何二进制代码的下发（包括so、dex、jar）和插件化技术的使用，故使用X5 内核的app不支持在海外Google Play上架新版本微信已经从x5内核切换到xweb内核，可以通过<code>Navigator.userAgent.toLowerCase().includes(&#39;xweb&#39;)换成xweb</code>，旧版X5内核是<code>includes(&#39;tbs&#39;)</code></p><p>组里也有人说现在企微自带的x5内核是直接在系统自带<code>WebView</code>简单封装了一下（为了减小app体积），运行的时候是调用系统<code>WebView</code>在渲染执行，所以系统<code>WebView</code>版本低会导致白屏（此条存疑）</p><h2 id="小程序内核" tabindex="-1">小程序内核 <a class="header-anchor" href="#小程序内核" aria-hidden="true">#</a></h2><p>小程序内核其实就是微信内置的内核，安卓端的还是X5内核，它是基于chromium（blink和v8）的腾讯魔改版，小程序官网不写x5，写的是chromium</p>',15),p=[d];function i(t,c,A,s,l,n){return o(),a("div",null,p)}const b=e(r,[["render",i]]);export{h as __pageData,b as default};
