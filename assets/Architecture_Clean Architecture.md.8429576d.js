import{_ as s,c as a,o as e,a as n}from"./app.13185f86.js";const u=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"domain层","slug":"domain层","link":"#domain层","children":[{"level":3,"title":"entities","slug":"entities","link":"#entities","children":[]},{"level":3,"title":"use cases","slug":"use-cases","link":"#use-cases","children":[]}]},{"level":2,"title":"Interface Adapters","slug":"interface-adapters","link":"#interface-adapters","children":[{"level":3,"title":"UI层","slug":"ui层","link":"#ui层","children":[]},{"level":3,"title":"services层","slug":"services层","link":"#services层","children":[]}]}],"relativePath":"Architecture/Clean Architecture.md"}'),l={name:"Architecture/Clean Architecture.md"},t=n(`<p><a href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html" target="_blank" rel="noreferrer">Clean Architecture</a><br><a href="https://dev.to/bespoyasov/clean-architecture-on-frontend-4311" target="_blank" rel="noreferrer">参考资料1</a><br><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#components" target="_blank" rel="noreferrer">参考资料2</a><br><a href="https://github.com/bespoyasov/frontend-clean-architecture" target="_blank" rel="noreferrer">项目参考</a></p><p>除了Clean Architecture，还有Hexagonal Architecture、Onion Architecture、Screaming Architecture、DCI、BCE等系统架构，它们都非常相似，核心观点都是关注点分离，分层（计算机领域经典名言：没有什么是多加一层解决不了的）</p><p>这些架构思想形成了一种系统：</p><p>1、不依赖于特定框架和库，框架和库只是构建系统的工具</p><p>2、可测试，测试业务逻辑（最内层）不依赖UI、数据库、Web服务器和其它任何外部因素（这些都是最外层）</p><p>3、独立与任何外层（UI、数据库），即修改它们不会影响系统其它部分，如Vue2升级Vue3、Mongo替换MySQL</p><p>总体思想就是内层逻辑不依赖外层，修改外层也不会影响到内层，但是外层运行依赖内层，内层不可以知道外层任何事情，外层声明的变量、函数等也不能在内层里用，而外层得用内层提供的变量、函数等，这样才能保证外层不会影响到内层，内层不直接调用外层的数据，而是调用接口，这个接口由外层去实现</p><h2 id="domain层" tabindex="-1">domain层 <a class="header-anchor" href="#domain层" aria-hidden="true">#</a></h2><p>也叫Business Layer业务层，用实体和数据描述领域，核心业务，与UI层使用框架（React、Vue等)无关</p><p>domain层包含entities（实体）和use cases（用例函数）</p><h3 id="entities" tabindex="-1">entities <a class="header-anchor" href="#entities" aria-hidden="true">#</a></h3><p>封装着企业范围的业务规则，可以是具有方法的对象，可以是一组数据结构和函数，只要可以被企业中的不同应用程序使用就行，以商店系统举例，entities可以是用户、商品、购物车、订单等，包括数据类型，创建实体的工厂，以及改变这些实例数据的函数</p><h3 id="use-cases" tabindex="-1">use cases <a class="header-anchor" href="#use-cases" aria-hidden="true">#</a></h3><p>会转换实体数据的函数，描述了一类场景，添加购物车、计算总额，功能是负责响应事件发生后对应去做某件事，逻辑对外层屏蔽，只返回结果</p><p>use cases层输出（数据和函数）和UI层打交道，输入（获取数据）和services层打交道</p><h2 id="interface-adapters" tabindex="-1">Interface Adapters <a class="header-anchor" href="#interface-adapters" aria-hidden="true">#</a></h2><p>在前端，通常是UI层和services层</p><h3 id="ui层" tabindex="-1">UI层 <a class="header-anchor" href="#ui层" aria-hidden="true">#</a></h3><p>组合各个组件拼成页面，并绑定事件调用use cases层提供的用例函数，并获取调用结果，改变UI层代码（如Vue迁移到React）不会影响use cases层和domain层</p><p>UI层（也有的叫Presentation Layer表现层）只做纯粹的数据展示和函数绑定，消费services层提供的数据、触发use cases层的用例函数</p><p>例如结账页面，点击结账按钮 =&gt; 检索购物车 =&gt; 调用生成订单接口 =&gt; 支付订单 =&gt; 如果失败则通知用户 =&gt; 清空购物车并展示订单</p><p>从检索购物车到支付订单只需要调用use cases提供的用例函数，该用例函数专门描述结账场景，而UI层只需要在用户结账按钮去调用触发这个用例函数，并且响应结账结果即可</p><h3 id="services层" tabindex="-1">services层 <a class="header-anchor" href="#services层" aria-hidden="true">#</a></h3><p>负责提供服务和数据（请求接口、转化数据提供给ui层等），外部服务需要和我们需求相适配，如果不适配那么需要一个适配器（即派生出一个Adapter层），我需要什么样的数据，外层服务就给我做成什么样</p><p>网上关于Clean Architecture的文章，划分的层次名称与层级不一定相同，但大体思想是一样的</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useAddToCart</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">storage</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">CartStorageService</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useCartStorage</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 用例函数：添加到购物车</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">addToCart</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">user</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">User</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">product</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Product</span><span style="color:#89DDFF;">):</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cart</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">storage</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 获取购物车</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">updated</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">addProduct</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">cart</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">product</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 获取添加购物车后的最新值</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">storage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">updateCart</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">updated</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 更新购物车</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 提供给UI层的&quot;添加到购物车&quot;按钮绑定</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">addToCart</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div>`,26),p=[t];function o(r,c,i,y,F,d){return e(),a("div",null,p)}const D=s(l,[["render",o]]);export{u as __pageData,D as default};
