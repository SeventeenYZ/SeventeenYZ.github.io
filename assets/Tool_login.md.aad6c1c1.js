import{_ as e,c as o,o as c,a as d}from"./app.2608b0ed.js";const S=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"Cookie + Session登录","slug":"cookie-session登录","link":"#cookie-session登录","children":[]},{"level":2,"title":"token登录","slug":"token登录","link":"#token登录","children":[]},{"level":2,"title":"token续签","slug":"token续签","link":"#token续签","children":[]}],"relativePath":"Tool/login.md"}'),n={name:"Tool/login.md"},t=d('<h2 id="cookie-session登录" tabindex="-1">Cookie + Session登录 <a class="header-anchor" href="#cookie-session登录" aria-hidden="true">#</a></h2><p><code>http</code>是无状态协议，客户端发起请求时与服务器建立连接，请求完成后又会断开连接，这种方式是为了节省传输时占用的连接资源，为了判断客户端的登录状态推出了<code>Cookie</code></p><p><code>Cookie</code>是服务器给客户端的一段特殊信息，客户端每次发送请求时会在请求头带上这些特殊信息</p><p>服务器对<code>Cookie</code>进行认证，需要通过<code>Session</code></p><p><code>Session</code>是一种记录客户端状态的机制，服务器在验证登录成功后，会创建<code>SessionId</code>并保存起来，并通过<code>set-cookie</code>将<code>SessionId</code>写入<code>Cookie</code>中，当客户端再次访问的时候比对<code>Cookie</code>中的<code>SessionId</code>与服务端保存的<code>SessionId</code>是否一致来验证</p><p>存在的问题：</p><p>服务端对接大量的客户端也就需要保存大量的<code>SessionId</code> 如果服务端是集群，为了同步登录态，需要将<code>SessionId</code>同步到每一台机器上</p><h2 id="token登录" tabindex="-1">token登录 <a class="header-anchor" href="#token登录" aria-hidden="true">#</a></h2><p><code>token</code>是服务端生成的一串字符串当成客户端请求的一个标识，首次登录后，服务端生成一个<code>token</code>返回给客户端，客户端自行保存，后续访问带上这个<code>token</code>来让服务器验证身份</p><h2 id="token续签" tabindex="-1">token续签 <a class="header-anchor" href="#token续签" aria-hidden="true">#</a></h2><p>通过双<code>token</code>，即<code>access token</code>和<code>refresh token</code>来实现<code>token</code>续签（<code>refresh token</code>也有的叫<code>cache token</code>）</p><p>后端为了<code>token</code>的安全性，一般会把<code>token</code>的过期时间设置得比较短，而为了避免用户频繁登录，传给客户端保存的是<code>access token</code>，当验证<code>access token</code>有效时，会根据规则取出<code>refresh token</code>判断是否存在</p><p>不存在则说明客户空闲过久，信息失效需要重新登录。存在则验证是否过期，过期会重新续签<code>token</code></p><p>例如<code>access token</code>有效期12小时，<code>refresh token</code>有效期24小时，用户如果在超过12小时但是不到24小时的时间内请求服务器则会续签<code>token</code>，超过24小时就需要重新登录</p>',14),s=[t];function i(a,k,r,l,p,h){return c(),o("div",null,s)}const f=e(n,[["render",i]]);export{S as __pageData,f as default};
